!function(t){function e(e){for(var n,o,s=e[0],h=e[1],l=e[2],f=0,u=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);for(p&&p(e);u.length;)u.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var h=a[s];0!==r[h]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={1:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=h;i.push([133,0]),a()}({133:function(t,e,a){"use strict";a.r(e);var n=a(18),r=a(66),i=a(25),o=a.n(i),s=(a(98),a(67),a(99),a(31));n.default.use(r.a),n.default.use(o.a);new n.default({el:"#app",data:function(){var t={version:"0.5",exp:{curr:-1,next:-1,full:-1,process:"-"},point:{x1:0,x2:0,x3:0,y1:0,y2:0},expData:[1e3,1550,2050,2600,3175,3750,4350,4975,5650],level:1,tolerance:2,file:null};return t},computed:{},methods:{selectFile:function(t){var e=t.target.files[0];e?this.level>9||this.level<1?this.$bvToast.toast("好感等级无效，有效的好感等级是1-9",{title:"错误",variant:"danger",solid:!0}):(this.loadImg(e),t.target.value=null):this.$bvToast.toast("图片无效",{title:"错误",variant:"danger",solid:!0})},calc:function(){if(this.point.x1+this.point.x2+this.point.x3===0)this.exp.curr=-1,this.exp.next=-1,this.exp.full=-1,this.exp.process="-";else if(0===this.point.x1&&1===this.point.x2&&1===this.point.x3)this.exp.curr=this.expData[9],this.exp.next=0,this.exp.full=0,this.exp.process="100%";else{var t=this.point.x3-this.point.x1,e=this.point.x2-this.point.x1+1,a=Math.max(0,Math.min(1,e/t));this.exp.process=Math.round(1e4*a)/100+"%";var n=Math.round(this.expData[this.level-1]*a);this.exp.curr=n,this.exp.next=this.expData[this.level-1]-n,this.exp.full=this.exp.next;for(var r=this.level;r<9;r++)this.exp.full+=this.expData[r];var i=this.$refs.canvas.getContext("2d");i.strokeStyle="red",i.strokeRect(this.point.x1-1,this.point.y1-1,this.point.x2-this.point.x1+1,this.point.y2-this.point.y1+2),i.strokeStyle="#000000",i.strokeRect(this.point.x2+1,this.point.y1-1,this.point.x3-this.point.x2+1,this.point.y2-this.point.y1+2)}},loadImg:function(){var t=this;if(null!==this.file){var e=document.createElement("canvas"),a=e.getContext("2d"),n=new Image;n.onload=function(){var r=t.$refs.canvas;r.width=n.width,r.height=n.height;var i=r.getContext("2d");i.clearRect(0,0,r.width,r.height),i.drawImage(n,0,0),e.width=n.width,e.height=n.height,a.drawImage(n,0,0);for(var o=a.getImageData(0,0,n.width,n.height),h=[],l=-1,p=-1,f=[],u={r:171,g:167,b:243},c=0,d=o.width;c<d;c++){h[c]=[];for(var v=0,g=o.height;v<g;v++){var x=4*(v*d+c),M={r:o.data[x],g:o.data[x+1],b:o.data[x+2],a:o.data[x+3]};M.diff=Object(s.a)(u,M),M.diff<5&&(-1===l&&(l=c),-1===p&&(p=c),l=Math.min(l,c),p=Math.max(p,c),-1===f.indexOf(v)&&f.push(v)),h[c][v]=M}}if(-1!==p&&-1!==l){for(var b=[],w=0,m=f.length;w<m;w++){for(var y=f[w],O=0,$=l;$<=p;$++)h[$][y].diff<=5&&O++;O/(p-l+1)>=.95&&b.push(y)}if(0!==b.length){var j=Math.min(b.length-1,Math.max(0,Math.round(b.length/2)-1)),T=b[j];t.point.y1=b[0],t.point.y2=b[b.length-1];var D=[];if(l>=5&&D.push(h[l-5][T]),T-j-5>=0&&(D.push(h[l][T-j-5]),D.push(h[p][T-j-5])),T+j+5<o.height&&(D.push(h[l][T+j+5]),D.push(h[p][T+j+5])),0!==D.length){var k=Object(s.b)(D),I=0;t.point.x3=0;for(var q=p+1,P=h.length;q<P;q++){var L=Object(s.a)(k,h[q][T]),R=8,S=4;switch(t.tolerance){case 1:R=5,S=5;break;case 2:R=8,S=4;break;case 3:R=10,S=3}if(L<R){if(++I>=S){t.point.x3=q-5;break}}else I=0}0===t.point.x3?(t.$bvToast.toast("识别失败，请确认截图无误，如确认截图无误请向作者反馈",{title:"错误",variant:"danger",solid:!0}),t.point.x1=0,t.point.x2=0):(t.point.x1=l,t.point.x2=p),t.calc()}else t.$bvToast.toast("没有识别到好感度进度条",{title:"错误",variant:"danger",solid:!0})}else t.$bvToast.toast("没有识别到好感度进度条",{title:"错误",variant:"danger",solid:!0})}else t.$bvToast.toast("没有识别到好感度进度条",{title:"错误",variant:"danger",solid:!0})},n.src=URL.createObjectURL(this.file)}else this.$bvToast.toast("请先上传图片",{title:"错误",variant:"danger",solid:!0})}},mounted:function(){var t=this;this.$refs.canvas.ondragleave=function(t){t.preventDefault()},this.$refs.canvas.ondrop=function(e){e.preventDefault();var a=e.dataTransfer.files;if(!(a.length<1)){var n=a[0],r=n.name.toLocaleLowerCase();-1!==r.indexOf("png")||-1!==r.indexOf("bmp")?(t.file=n,t.loadImg()):t.$bvToast.toast("只能识别png图片和bmp图片",{title:"错误",variant:"danger",solid:!0})}},this.$refs.canvas.ondragenter=function(t){t.preventDefault()},this.$refs.canvas.ondragover=function(t){t.preventDefault()},document.addEventListener("paste",(function(e){var a=e.clipboardData&&e.clipboardData.items,n=null;if(a&&0!==a.length){if(a&&a.length)for(var r=0;r<a.length;r++)if(-1!==a[r].type.indexOf("image")){n=a[r].getAsFile();break}n?(t.file=n,t.loadImg()):t.$bvToast.toast("只能粘贴图片",{title:"错误",variant:"danger",solid:!0})}else t.$bvToast.toast("无法识别的内容",{title:"错误",variant:"danger",solid:!0})}))}})},31:function(t,e,a){"use strict";function n(t){for(var e=[],a={r:255,g:255,b:255},n=0,i=t.length;n<i;n++)e.push({color:t[n],diff:r(a,t[n])});return e.sort((function(t,e){return t.diff-e.diff})),e[Math.floor((e.length-1)/2)].color}function r(t,e){return function(t,e){var a=t.L,n=t.a,r=t.b,s=e.L,h=e.a,l=e.b,p=Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),f=Math.sqrt(Math.pow(h,2)+Math.pow(l,2)),u=(p+f)/2,c=.5*(1-Math.sqrt(Math.pow(u,7)/(Math.pow(u,7)+Math.pow(25,7)))),d=(1+c)*n,v=(1+c)*h,g=Math.sqrt(Math.pow(d,2)+Math.pow(r,2)),x=Math.sqrt(Math.pow(v,2)+Math.pow(l,2)),M=o(r,d),b=o(l,v),w=s-a,m=x-g,y=function(t,e,a,n){if(t*e==0)return 0;if(Math.abs(n-a)<=180)return n-a;if(n-a>180)return n-a-360;if(n-a<-180)return n-a+360;throw new Error}(p,f,M,b),O=2*Math.sqrt(g*x)*Math.sin(i(y)/2),$=(a+s)/2,j=(g+x)/2,T=function(t,e,a,n){if(t*e==0)return a+n;if(Math.abs(a-n)<=180)return(a+n)/2;if(Math.abs(a-n)>180&&a+n<360)return(a+n+360)/2;if(Math.abs(a-n)>180&&a+n>=360)return(a+n-360)/2;throw new Error}(p,f,M,b),D=1-.17*Math.cos(i(T-30))+.24*Math.cos(i(2*T))+.32*Math.cos(i(3*T+6))-.2*Math.cos(i(4*T-63)),k=30*Math.exp(-Math.pow((T-275)/25,2)),I=Math.sqrt(Math.pow(j,7)/(Math.pow(j,7)+Math.pow(25,7))),q=1+.015*Math.pow($-50,2)/Math.sqrt(20+Math.pow($-50,2)),P=1+.045*j,L=1+.015*j*D,R=-2*I*Math.sin(i(2*k));return Math.sqrt(Math.pow(w/(1*q),2)+Math.pow(m/(1*P),2)+Math.pow(O/(1*L),2)+R*(m/(1*P))*(O/(1*L)))}(t=s(t),e=s(e))}function i(t){return t*(Math.PI/180)}function o(t,e){if(0===t&&0===e)return 0;var a=Math.atan2(t,e)*(180/Math.PI);return a>=0?a:a+360}function s(t){return function(t){var e=t.Y/100,a=t.Z/108.883,n=t.X/95.047;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;a=a>.008856?Math.pow(a,1/3):7.787*a+16/116;return{L:116*e-16,a:500*(n-e),b:200*(e-a)}}(function(t){var e=(t=function(t){var e={R:t.R||t.r||0,G:t.G||t.g||0,B:t.B||t.b||0};void 0===t.a&&void 0===t.A||(e.A=t.A||t.a||0);return e}(t)).R/255,a=t.G/255,n=t.B/255;e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92;a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92;n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92;return{X:.4124*(e*=100)+.3576*(a*=100)+.1805*(n*=100),Y:.2126*e+.7152*a+.0722*n,Z:.0193*e+.1192*a+.9505*n}}(t))}a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return n}))},67:function(t,e,a){}});