!function(t){function e(e){for(var r,i,s=e[0],h=e[1],p=e[2],f=0,l=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&l.push(n[i][0]),n[i]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);for(u&&u(e);l.length;)l.shift()();return o.push.apply(o,p||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,s=1;s<a.length;s++){var h=a[s];0!==n[h]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={0:0},o=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var p=0;p<s.length;p++)e(s[p]);var u=h;o.push([129,1]),a()}({129:function(t,e,a){"use strict";a.r(e);var r=a(40),n=a(128),o=a(29),i=a.n(o);a(132),a(133),a(134);r.default.use(n.a),r.default.use(i.a);new r.default({el:"#app",data:function(){var t={version:"0.1",exp:{curr:-1,next:-1,full:-1,process:"-"},point:{x1:0,x2:0,x3:0},expData:[1e3,1550,2050,2600,3175,3750,4350,4975,5650],level:1};return t},computed:{},methods:{selectFile:function(t){var e=t.target.files[0];e?this.level>9||this.level<1?this.$bvToast.toast("好感等级无效，有效的好感等级是1-9",{title:"错误",variant:"danger",solid:!0}):(this.loadImg(e),t.target.value=null):this.$bvToast.toast("图片无效",{title:"错误",variant:"danger",solid:!0})},calc:function(){if(this.point.x1+this.point.x2+this.point.x3===0)this.exp.curr=-1,this.exp.next=-1,this.exp.full=-1,this.exp.process="-";else if(0===this.point.x1&&1===this.point.x2&&1===this.point.x3)this.exp.curr=this.expData[9],this.exp.next=0,this.exp.full=0,this.exp.process="100%";else{var t=this.point.x3-this.point.x1,e=(this.point.x2-this.point.x1+1)/t;this.exp.process=Math.round(1e4*e)/100+"%";var a=Math.round(this.expData[this.level-1]*e);this.exp.curr=a,this.exp.next=this.expData[this.level-1]-a,this.exp.full=this.exp.next;for(var r=this.level;r<9;r++)this.exp.full+=this.expData[r]}},loadImg:function(t){var e=this,a=this.$refs.canvas.getContext("2d"),r=new Image;r.onload=function(){a.drawImage(r,0,0);for(var t=a.getImageData(0,0,r.width,r.height),n=[],o=-1,i=-1,h=[],p=177,u=166,f=255,l=0,c=t.width;l<c;l++){n[l]=[];for(var v=0,d=t.height;v<d;v++){var x=4*(v*c+l),M={r:t.data[x],g:t.data[x+1],b:t.data[x+2],a:t.data[x+3]};M.r===p&&M.g===u&&M.b===f&&(-1===o&&(o=l),-1===i&&(i=l),o=Math.min(o,l),i=Math.max(i,l),-1===h.indexOf(v)&&h.push(v)),n[l][v]=M}}for(var w=0,g=h.length;w<g;w++){for(var b=h[w],m=!0,y=o;y<=i;y++){var O=n[y][b];if(O.r!==p||O.g!==u||O.b!==f){m=!1;break}}if(m){for(var j=[],D=i+1,$=n.length;D<$;D++){s(n[D-1][b],n[D][b])>2&&j.push(D)}j.length<2?(e.$bvToast.toast("识别失败，请确认截图无误，如确认截图无误请向作者反馈",{title:"错误",variant:"danger",solid:!0}),e.point.x1=0,e.point.x2=0,e.point.x3=0):2===j.length||j[0]+1===j[1]&&j[1]+1!==j[2]?(e.$bvToast.toast("好感经验已满",{title:"提示",variant:"primary",solid:!0}),e.point.x1=0,e.point.x2=1,e.point.x3=1):(e.point.x1=o,e.point.x2=i,e.point.x3=j[1]),e.calc();break}}},r.src=URL.createObjectURL(t)}},mounted:function(){var t=this;this.$refs.canvas.ondragleave=function(t){t.preventDefault()},this.$refs.canvas.ondrop=function(e){e.preventDefault();var a=e.dataTransfer.files;if(!(a.length<1)){var r=a[0],n=r.name.toLocaleLowerCase();-1!==n.indexOf("png")||-1!==n.indexOf("bmp")?t.loadImg(r):t.$bvToast.toast("只能识别png图片和bmp图片",{title:"错误",variant:"danger",solid:!0})}},this.$refs.canvas.ondragenter=function(t){t.preventDefault()},this.$refs.canvas.ondragover=function(t){t.preventDefault()}}});function s(t,e){return function(t,e){var a=t.L,r=t.a,n=t.b,o=e.L,i=e.a,s=e.b,u=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),f=Math.sqrt(Math.pow(i,2)+Math.pow(s,2)),l=(u+f)/2,c=.5*(1-Math.sqrt(Math.pow(l,7)/(Math.pow(l,7)+Math.pow(25,7)))),v=(1+c)*r,d=(1+c)*i,x=Math.sqrt(Math.pow(v,2)+Math.pow(n,2)),M=Math.sqrt(Math.pow(d,2)+Math.pow(s,2)),w=p(n,v),g=p(s,d),b=o-a,m=M-x,y=function(t,e,a,r){if(t*e==0)return 0;if(Math.abs(r-a)<=180)return r-a;if(r-a>180)return r-a-360;if(r-a<-180)return r-a+360;throw new Error}(u,f,w,g),O=2*Math.sqrt(x*M)*Math.sin(h(y)/2),j=(a+o)/2,D=(x+M)/2,$=function(t,e,a,r){if(t*e==0)return a+r;if(Math.abs(a-r)<=180)return(a+r)/2;if(Math.abs(a-r)>180&&a+r<360)return(a+r+360)/2;if(Math.abs(a-r)>180&&a+r>=360)return(a+r-360)/2;throw new Error}(u,f,w,g),q=1-.17*Math.cos(h($-30))+.24*Math.cos(h(2*$))+.32*Math.cos(h(3*$+6))-.2*Math.cos(h(4*$-63)),P=30*Math.exp(-Math.pow(($-275)/25,2)),I=Math.sqrt(Math.pow(D,7)/(Math.pow(D,7)+Math.pow(25,7))),T=1+.015*Math.pow(j-50,2)/Math.sqrt(20+Math.pow(j-50,2)),L=1+.045*D,_=1+.015*D*q,R=-2*I*Math.sin(h(2*P));return Math.sqrt(Math.pow(b/(1*T),2)+Math.pow(m/(1*L),2)+Math.pow(O/(1*_),2)+R*(m/(1*L))*(O/(1*_)))}(t=u(t),e=u(e))}function h(t){return t*(Math.PI/180)}function p(t,e){if(0===t&&0===e)return 0;var a=Math.atan2(t,e)*(180/Math.PI);return a>=0?a:a+360}function u(t){return function(t){var e=t.Y/100,a=t.Z/108.883,r=t.X/95.047;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;a=a>.008856?Math.pow(a,1/3):7.787*a+16/116;return{L:116*e-16,a:500*(r-e),b:200*(e-a)}}(function(t){var e=(t=function(t){var e={R:t.R||t.r||0,G:t.G||t.g||0,B:t.B||t.b||0};void 0===t.a&&void 0===t.A||(e.A=t.A||t.a||0);return e}(t)).R/255,a=t.G/255,r=t.B/255;e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92;a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92;r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92;return{X:.4124*(e*=100)+.3576*(a*=100)+.1805*(r*=100),Y:.2126*e+.7152*a+.0722*r,Z:.0193*e+.1192*a+.9505*r}}(t))}},133:function(t,e,a){}});